if (self.CavalryLogger) { CavalryLogger.start_js(["6BGID"]); }

__d('StickersTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:StickersLoggerConfig',this.$StickersTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:StickersLoggerConfig',this.$StickersTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$StickersTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$StickersTypedLogger1=babelHelpers['extends']({},this.$StickersTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$StickersTypedLogger1.event=j;return this;};h.prototype.setNumsearchresults=function(j){this.$StickersTypedLogger1.numsearchresults=j;return this;};h.prototype.setPackid=function(j){this.$StickersTypedLogger1.packid=j;return this;};h.prototype.setPackids=function(j){this.$StickersTypedLogger1.packids=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setSearchtoken=function(j){this.$StickersTypedLogger1.searchtoken=j;return this;};h.prototype.setStickerid=function(j){this.$StickersTypedLogger1.stickerid=j;return this;};h.prototype.setTagid=function(j){this.$StickersTypedLogger1.tagid=j;return this;};h.prototype.setTriggeredword=function(j){this.$StickersTypedLogger1.triggeredword=j;return this;};h.prototype.setTriggerused=function(j){this.$StickersTypedLogger1.triggerused=j;return this;};var i={event:true,numsearchresults:true,packid:true,packids:true,searchtoken:true,stickerid:true,tagid:true,triggeredword:true,triggerused:true};f.exports=h;}),null);
__d('FantaChatHeaderContainer.react',['cx','AsyncRequest','ChatTabHeaderContainer.react','FantaTabActions','FantaTabSheetActions','mercuryBlockedParticipantsRe','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryThreadInfo','MercuryThreads','MessageRequestUtils','MoveToWorkUtils','React','XGroupCallNuxController','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$FantaChatHeaderContainer1=false,this.state={rtcNuxShown:false},this.$FantaChatHeaderContainer6=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer5=function(){var s=this.props.threadID;c('FantaTabSheetActions').openNameConversationSheet(s);}.bind(this),this.$FantaChatHeaderContainer7=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer9=function(){this.props.onClose&&this.props.onClose();}.bind(this),this.$FantaChatHeaderContainer8=function(event){this.$FantaChatHeaderContainer3();var s=event.target;if(s&&s.classList&&(s.classList.contains("_15p6")||s.classList.contains("_2nlt")||s.classList.contains("_14lt"))){event.preventDefault();c('FantaTabActions').minimizeTab(this.props.threadID);}}.bind(this),this.$FantaChatHeaderContainer3=function(){if(this.state.rtcNuxShown&&this.$FantaChatHeaderContainer1){this.setState({rtcNuxShown:false});var s=c('XGroupCallNuxController').getURIBuilder().setString('action','dismiss').getURI();new (c('AsyncRequest'))(s).send();}}.bind(this),o;}m.prototype.shouldComponentUpdate=function(n,o){var p=this.props,q=this.state;return p.viewer!==n.viewer||p.threadID!==n.threadID||p.isLastGroupTab!==n.isLastGroupTab||p.thread!==n.thread||q.rtcNuxShown!==o.rtcNuxShown||p.customColor!==n.customColor;};m.prototype.componentDidMount=function(){this.$FantaChatHeaderContainer1=true;this.$FantaChatHeaderContainer2();};m.prototype.componentWillUnmount=function(){this.$FantaChatHeaderContainer3();this.$FantaChatHeaderContainer1=false;};m.prototype.render=function(){var n=this.props,o=n.isFocused,p=n.thread,q=n.threadID,r=n.viewer,s=n.customColor,t=this.state.rtcNuxShown,u=!!p&&c('MercuryThreadInfo').isMuted(p),v=c('MercuryIDs').getParticipantIDFromFromThreadID(q),w=v?c('MercuryParticipants').getNow(v):null,x=w&&w.is_business_enabled,y=c('MoveToWorkUtils').isViewerEligible()&&c('MercuryIDs').isGroupChat(q)&&p&&this.$FantaChatHeaderContainer4(p.participants),z=p&&c('MercuryThreadInfo').showComposer(p)&&!c('isEmpty')(p.participants)&&!c('MessageRequestUtils').isMessageRequest(p)&&!c('MercuryConfig').ViewerIsReadOnly&&!(c('MercuryConfig').ColdOpenBlock&&(c('MercuryThreadInfo').isColdOpen(p)||c('MercuryThreadInfo').isEmptyLocalThread(p))),aa=p&&c('mercuryBlockedParticipantsRe').get().isMessageBlocked(p),ba=k.isNewEmptyLocalThread(q),ca=p&&p.message_count===0,da={hasMessageBlocked:aa,hasSwitchToWork:y,isBusinessEnabled:x,isEmptyChat:ba,isEmptyConversation:ca,isMuted:u,show:z},ea=s?{color:s}:null;return c('React').createElement('div',{className:"clearfix"+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!s?' '+"_1m34":''),style:ea},c('React').createElement(c('ChatTabHeaderContainer.react'),{additionalMenuProps:da,attachmentsShelf:document.createElement('div'),isActive:o,isRaised:true,isTyping:false,nameConversationFunc:this.$FantaChatHeaderContainer5,rtcNuxShown:t,sheetController:{openAddFriendsSheet:this.$FantaChatHeaderContainer6,openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:this.$FantaChatHeaderContainer7,threadID:q,viewer:r,onClick:this.$FantaChatHeaderContainer8,onCloseClick:this.$FantaChatHeaderContainer9,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function fa(){},onRTCNuxCloseButtonClick:this.$FantaChatHeaderContainer3,onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')}));};m.prototype.$FantaChatHeaderContainer4=function(n){return n.length>0&&n.every(function(o){var p=c('MercuryParticipants').getNow(o);return !!(p&&p.employee);});};m.prototype.$FantaChatHeaderContainer2=function(){if(this.props.isLastGroupTab){var n=c('XGroupCallNuxController').getURIBuilder().setString('action','should_show').getURI();new (c('AsyncRequest'))(n).setHandler(function(o){var p=o.payload.shouldShow;if(this.$FantaChatHeaderContainer1)this.setState({rtcNuxShown:p});}.bind(this)).send();}};m.propTypes={customColor:l.string,isFocused:l.bool.isRequired,isLastGroupTab:l.bool.isRequired,onClose:l.func.isRequired,thread:l.object,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('FantaConversation.react',['Bootloader','ChatConversation.react','CurrentUser','immutable','MercuryIDs','MessengerHotLikePreviewEvents','React','StickerInterfaces','StickersTypedLogger','SubscriptionsHandler','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$FantaConversation3=function(m){if(this.props.threadID===m)this.setState({likePreview:null});}.bind(this);this.$FantaConversation4=function(m,n){if(!m)return;new (c('StickersTypedLogger'))().setEvent('click_sticker').setPackid(m).setStickerid(n).log();c('Bootloader').loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(o,p,q){o.onIsPackInTray(m,c('StickerInterfaces').MESSAGES,function(r){if(r.in_sticker_tray){p.selectTrayPack(m);p.showStickerFlyout(this.props.threadID);}else q.showStore(m);}.bind(this));}.bind(this),'FantaConversation.react');}.bind(this);this.state={likePreview:null};this.$FantaConversation1=new (c('SubscriptionsHandler'))();}k.prototype.shouldComponentUpdate=function(l,m){var n=this.props,o=this.state;return !n.messages.equals(l.messages)||n.threadID!==l.threadID||n.thread!==l.thread||o.likePreview!==m.likePreview;};k.prototype.componentDidMount=function(){this.$FantaConversation2();};k.prototype.componentWillUnmount=function(){this.$FantaConversation1.release();};k.prototype.$FantaConversation2=function(){this.$FantaConversation1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(l,m){if(this.props.threadID===m)this.setState({likePreview:l});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$FantaConversation3),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$FantaConversation3),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,this.$FantaConversation3));};k.prototype.render=function(){var l=this.props.messages,m=this.props,n=m.onLoadMoreMessages,o=m.thread,p=m.threadID,q=this.state.likePreview,r=c('CurrentUser').getID();if(q)l=l.push(q);return o?c('React').createElement(c('ChatConversation.react'),{isCanonical:c('MercuryIDs').isCanonical(p),loadMoreMessages:n,maxBubbleWidth:181-this.props.scrollbarPadding,messages:l,onAttachmentLoad:function(){return this.props.onAttachmentLoad();}.bind(this),onMount:c('emptyFunction'),onStickerClick:this.$FantaConversation4,ref:'conversation',thread:o,threadID:p,viewer:r}):c('React').createElement('div',null);};k.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList();};k.propTypes={messages:j.object.isRequired,onLoadMoreMessages:j.func.isRequired,scrollbarPadding:j.number,thread:j.object,threadID:j.string.isRequired};f.exports=k;}),null);
__d('FantaPageGreetingLoader.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.threadID;return c('getPageIDFromThreadID')(l)?c('React').createElement('div',{className:"_av1"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercuryChatTabPagesGreetingContainer.react').__setRef('FantaPageGreetingLoader.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:l})})):null;};f.exports=i;}),null);
__d('FantaConversationScroller.react',['cx','fbt','Animation','Arbiter','BootloadedComponent.react','ChatTypingIndicators.react','CurrentUser','Event','FantaConversation.react','FantaPageGreetingLoader.react','FantaTabActions','Grid.react','immutable','JSResource','MercuryLastMessageIndicator.react','MercuryAttachment','MercuryCamQuickReply.react','MercuryConfig','MercuryIDs','MercuryQuickReply.react','MercuryThreads','MessengerHotLikePreviewEvents','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','React','ReactDOM','MercuryShareAttachmentRenderLocations','Scroll','ScrollBoundaryContain','Style','SubscriptionsHandler','XUISpinner.react','clearImmediate','emptyFunction','getElementPosition','isEventSupported','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('Grid.react').GridItem,n=c('React').PropTypes,o=15,p=null,q=20;function r(t){if(p===null){var u=t.firstElementChild;if(u){c('Style').set(t,'overflow','scroll');var v=u.clientWidth;c('Style').set(t,'overflow','hidden');var w=u.clientWidth;p=Math.max(w-v,0);c('Style').set(t,'overflow','');}else p=0;}return p;}j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t){k.constructor.call(this,t);this.$FantaConversationScroller13=function(u){this.$FantaConversationScroller14();if(this.$FantaConversationScroller15()&&!this.$FantaConversationScroller16()&&!this.$FantaConversationScroller3&&!this.props.hasFetchedAll){this.setState({loadingMessages:true});this.props.onLoadMoreMessages();}this.$FantaConversationScroller17();}.bind(this);this.$FantaConversationScroller18=function(){this.$FantaConversationScroller1=null;c('FantaTabActions').scrollBottomChanged(this.props.threadID,this.$FantaConversationScroller6,this.$FantaConversationScroller19);}.bind(this);this.$FantaConversationScroller19=function(){this.$FantaConversationScroller20(false);this.$FantaConversationScroller12();}.bind(this);this.state={loadingMessages:!l.isEmptyLocalThread(t.threadID),scrollbarPadding:p===null?o:p};this.$FantaConversationScroller6=true;this.$FantaConversationScroller7=new (c('SubscriptionsHandler'))();}s.prototype.shouldComponentUpdate=function(t,u){var v=this.props,w=this.state;return v.hasFetchedAll!==t.hasFetchedAll||v.isFocused!==t.isFocused||!v.messages.equals(t.messages)||v.showContextBanner!==t.showContextBanner||v.thread!==t.thread||v.threadID!==t.threadID||w.loadingMessages!==u.loadingMessages;};s.prototype.componentDidMount=function(){this.$FantaConversationScroller8();this.$FantaConversationScroller9();this.$FantaConversationScroller10();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller11());this.setState({scrollbarPadding:r(this.refs.scrollContainer)});};s.prototype.componentDidUpdate=function(t){this.$FantaConversationScroller10();if(this.$FantaConversationScroller3){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=this.$FantaConversationScroller3||0,w=u.scrollHeight-v;this.scrollToPosition(w,false);this.$FantaConversationScroller3=null;}if(!t.messages.equals(this.props.messages)){c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller11());var x=t.messages.last(),y=this.props.messages.last();if(x!==y&&y&&y.author){var z=c('MercuryIDs').getUserIDFromParticipantID(y.author);if(z===c('CurrentUser').getID()){this.scrollToBottom(false);this.$FantaConversationScroller12();}}}};s.prototype.componentWillUnmount=function(){this.$FantaConversationScroller1&&c('clearImmediate')(this.$FantaConversationScroller1);this.$FantaConversationScroller7.release();};s.prototype.componentWillReceiveProps=function(t){if(this.state.loadingMessages&&t.messages.size>0&&!t.messages.equals(this.props.messages)||t.hasFetchedAll||t.showContextBanner){this.setState({loadingMessages:false});var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=u.scrollHeight,w=c('Scroll').getTop(u);this.$FantaConversationScroller3=v-w;}};s.prototype.$FantaConversationScroller10=function(){var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(this.$FantaConversationScroller6)this.scrollToBottom(t);};s.prototype.$FantaConversationScroller17=function(){var t=this.props.threadID,u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=u.getBoundingClientRect(),w=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!w||!v)return;var x=[],y=c('MessengerVideoAutoplayStore').getMessageIDs(t),z=y||this.$FantaConversationScroller11()||c('immutable').List();z.map(function(aa){var ba=c('MercuryAttachment').getVideoElem(aa,w);if(ba)x.push([aa,ba.getBoundingClientRect()]);});if(x.length)c('MessengerVideoAutoplayActions').onScroll(t,y?null:z,c('immutable').Map(x),v);};s.prototype.$FantaConversationScroller11=function(){return this.props.messages.filter(function(t){return c('MercuryAttachment').isSingleVideoAttachment(t)||c('MercuryAttachment').isSharedVideoAttachmentMessage(t);}).reverse().map(function(t){return t.message_id;});};s.prototype.scrollToBottom=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(u)this.scrollToPosition(u.scrollHeight,t);};s.prototype.scrollToPosition=function(t,u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller5&&this.$FantaConversationScroller5.stop();if(u){this.$FantaConversationScroller5=new (c('Animation'))(v).to('scrollTop',t).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(v,t);};s.prototype.$FantaConversationScroller16=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);t=t===0?0:t||q;return c('Scroll').getTop(u)+u.clientHeight>=u.scrollHeight-t;};s.prototype.$FantaConversationScroller15=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer);return c('Scroll').getTop(t)<t.clientHeight;};s.prototype.$FantaConversationScroller12=function(){var t=this.$FantaConversationScroller6;if(this.$FantaConversationScroller16()){this.$FantaConversationScroller6=true;}else this.$FantaConversationScroller6=false;if(t!==this.$FantaConversationScroller6)this.$FantaConversationScroller1=c('setImmediate')(this.$FantaConversationScroller18);};s.prototype.$FantaConversationScroller8=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(!t)return;var u=c('isEventSupported')('mousewheel')?'mousewheel':c('isEventSupported')('wheel')?'wheel':'DOMMouseScroll',v=function(){this.$FantaConversationScroller12();}.bind(this),w=function y(){t.addEventListener(u,v,{passive:true});},x=function y(){t.removeEventListener(u,v,{passive:true});};this.$FantaConversationScroller7.addSubscriptions(c('Arbiter').subscribe('overflow-applied-to-body',function(){return this.$FantaConversationScroller10();}.bind(this)),c('Event').listen(t,'mousedown',v),c('Event').listen(t,'mouseup',v),c('Event').listen(t,'mouseenter',w),c('Event').listen(t,'mouseleave',x),{cancel:x},c('Event').listen(t,'scroll',c('throttle')(this.$FantaConversationScroller13,50)));if(t)c('ScrollBoundaryContain').applyToElem(t);};s.prototype.$FantaConversationScroller9=function(){this.$FantaConversationScroller7.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(t,u){if(this.props.threadID===u){this.$FantaConversationScroller20(false);clearInterval(this.$FantaConversationScroller4);this.$FantaConversationScroller4=setInterval(function(){this.$FantaConversationScroller20(false);}.bind(this),50);}}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(t){clearInterval(this.$FantaConversationScroller4);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(t){clearInterval(this.$FantaConversationScroller4);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(t){if(this.props.threadID===t)clearInterval(this.$FantaConversationScroller4);}.bind(this)));};s.prototype.render=function(){var t=this.props,u=t.hasFetchedAll,v=t.messages,w=t.showContextBanner,x=t.thread,y=t.threadID,z=c('CurrentUser').getID(),aa=c('MercuryConfig').ShowContextBanner,ba=aa&&(l.isEmptyLocalThread(y)||u||w),ca=!c('MercuryConfig').ChatSeenHeadsEnabled,da=this.state.loadingMessages||!x?c('React').createElement(c('XUISpinner.react'),{background:'light',className:"loading",size:'small'}):null;return c('React').createElement('div',{className:"_2v5j"},c('React').createElement('div',{className:'fbNubFlyoutBody scrollable',onClick:function(ea){if(ea.target&&ea.target.classList&&ea.target.classList.contains("_5wd4"))this.props.onFocus&&this.props.onFocus();}.bind(this),ref:'scrollContainer',role:'button',tabIndex:'0'},c('React').createElement('div',{className:'fbNubFlyoutBodyContent'},c('React').createElement(c('FantaPageGreetingLoader.react'),{threadID:y}),c('React').createElement(c('Grid.react'),{className:'conversationContainer',role:'log',cols:1},c('React').createElement(m,{alignv:'bottom'},c('React').createElement('div',{className:'accessible_elem'},i._("Chat Conversation Start")),ba?c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerContextBannerContainer.react').__setRef('FantaConversationScroller.react'),location:c('MercuryShareAttachmentRenderLocations').CHAT,viewer:z,threadID:y}):null,da,c('React').createElement('div',{style:v.size>0?{height:'176px'}:da?{height:'168px'}:{height:'192px'}},c('React').createElement(c('FantaConversation.react'),babelHelpers['extends']({onAttachmentLoad:function(){return this.$FantaConversationScroller10();}.bind(this),scrollbarPadding:this.state.scrollbarPadding,ref:'conversation'},this.props)),c('MercuryConfig').WebCamQuickReply?c('React').createElement(c('MercuryCamQuickReply.react'),{camQuickReplyWillShow:c('emptyFunction'),camQuickReplyDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),lastMessage:v.size>0?v.last():undefined,threadID:y,viewer:z}):null,c('React').createElement(c('ChatTypingIndicators.react'),{threadID:y,indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),viewer:z}),ca?c('React').createElement(c('MercuryLastMessageIndicator.react'),{hideTyping:true,indicatorDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),indicatorWillShow:c('emptyFunction'),lastMessage:v.size>0?v.last():null,threadID:y}):null,c('MercuryConfig').EnableQuickReply?c('React').createElement(c('MercuryQuickReply.react'),{lastMessage:v.size>0?v.last():undefined,threadID:y,quickReplyWillShow:c('emptyFunction'),quickReplyDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),viewer:z}):null),c('React').createElement('div',{className:'accessible_elem'},i._("Chat Conversation End")))))));};s.prototype.$FantaConversationScroller14=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer),u=c('getElementPosition')(t);c('Arbiter').inform('chatScrolled/'+this.props.threadID,{scrollTop:c('Scroll').getTop(t),top:u.y,viewHeight:u.height});};s.prototype.$FantaConversationScroller20=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(u)this.$FantaConversationScroller21(u.scrollHeight,t);};s.prototype.$FantaConversationScroller21=function(t,u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller5&&this.$FantaConversationScroller5.stop();if(u===true){this.$FantaConversationScroller5=new (c('Animation'))(v).to('scrollTop',t).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(v,t);};s.propTypes={hasFetchedAll:n.bool.isRequired,isFocused:n.bool.isRequired,messages:n.object.isRequired,onFocus:n.func,onLoadMoreMessages:n.func.isRequired,showContextBanner:n.bool,thread:n.object,threadID:n.string.isRequired};f.exports=s;}),null);
__d('FantaDragAndDropRow.react',['cx','fbt','ix','FantaMessageActions','FantaTypeFileUploaderFile','Image.react','MercuryAttachment','React','XUICloseButton.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$FantaDragAndDropRow1=function(){var s=this.props,t=s.threadID,u=s.fileData;c('FantaMessageActions').cancelFileUpload(t,u.id);}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.fileData,p=n.isUploaded,q=o.file,r='';if(q.type)r=c('MercuryAttachment').getAttachIconClassByMime(q.type);var s=c('joinClasses')(r,"_3tn"),t=p?'done':'',u=c('joinClasses')(t,"_2qh _2qe uploadFileRow");return c('React').createElement('div',{className:u},c('React').createElement(c('XUISpinner.react'),{className:"_2qf"}),c('React').createElement(c('XUICloseButton.react'),{'aria-label':i._("Remove file"),className:"_2qg",shade:'dark',size:'small',onClick:this.$FantaDragAndDropRow1}),c('React').createElement('div',{className:"_4-te"},c('React').createElement('span',{className:s},c('React').createElement(c('Image.react'),{src:j("86988")})),q.name));};f.exports=m;}),null);
__d('FantaDragAndDrop.react',['BootloadOnRender.react','FantaDragAndDropRow.react','FantaMessageActions','FantaTypeFileUploaderFile','FantaTypeSharePreview','immutable','JSResource','LazyComponent.react','MercuryShareAttachmentRenderLocations','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=960,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaDragAndDrop3=function(){c('FantaMessageActions').removeSharePreview(this.props.threadID);}.bind(this),n;}l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.threadID!==m.threadID||!!(!n.uploadingFiles&&m.uploadingFiles)||!!(n.uploadingFiles&&m.uploadingFiles&&!n.uploadingFiles.equals(m.uploadingFiles))||!!(!n.uploadedFiles&&m.uploadedFiles)||!!(n.uploadedFiles&&m.uploadedFiles&&!n.uploadedFiles.equals(m.uploadedFiles))||!!(!n.sharePreview&&m.sharePreview)||!!(n.sharePreview&&m.sharePreview&&!n.sharePreview.equals(m.sharePreview));};l.prototype.render=function(){var m=this.props,n=m.uploadedFiles,o=m.uploadingFiles,p=m.sharePreview,q=m.threadID,r=p||{},s=r.share,t=r.uri;return c('React').createElement('div',{className:'fbNubFlyoutAttachments'},c('React').createElement('div',{className:'chatAttachmentShelf'},s||t?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercurySharePreview.react').__setRef('FantaDragAndDrop.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{onClose:this.$FantaDragAndDrop3,threadID:q,imageSize:{width:j,height:j},location:c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW,share:s,uri:t})}):null,c('React').createElement('div',{ref:function(u){this.$FantaDragAndDrop1=u;}.bind(this)},this.$FantaDragAndDrop4(o,false),this.$FantaDragAndDrop4(n,true))));};l.prototype.$FantaDragAndDrop4=function(m,n){var o=this.props.threadID;return m&&m.map(function(p){return c('React').createElement(c('FantaDragAndDropRow.react'),{fileData:p,isUploaded:n,key:n?'uped-'+p.id:'uping-'+p.id,threadID:o});}).toArray();};l.propTypes={threadID:k.string.isRequired,uploadedFiles:k.object,uploadingFiles:k.object};f.exports=l;}),null);
__d('FantaPageComposerNullState.react',['BootloadOnRender.react','JSResource','LazyComponent.react','MNCommercePostbackCTADataManager','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$FantaPageComposerNullState1=function(){var p=this.props,q=p.nullPageID,r=p.nullPageTitle,s=p.threadID;c('MNCommercePostbackCTADataManager').sendAndConfirm(q,r,s);}.bind(this),l;}j.prototype.render=function(){var k=this.props.nullPageTitle;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPageComposerNullState.react').__setRef('FantaPageComposerNullState.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{title:k,onClick:this.$FantaPageComposerNullState1})});};f.exports=j;}),null);
__d('FantaPendingActions.react',['Bootloader','BootloadOnRender.react','FantaTabActions','JSResource','LazyComponent.react','MercuryThreadActions','MessageRequestUtils','MessagingTag','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MercuryThreadActions').get();h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaPendingActions1=function(){var q=this.props,r=q.thread,s=q.threadID,t=!!r&&c('MessageRequestUtils').isFiltered(r);if(t){c('Bootloader').loadModules(["WebMessengerDeleteThreadDialog"],function(u){u.show(s,function(){return c('FantaTabActions').closeTab(s);});},'FantaPendingActions.react');}else{j.changeFolder(s,c('MessagingTag').OTHER);c('FantaTabActions').closeTab(s);}}.bind(this),this.$FantaPendingActions2=function(){j.changeFolder(this.props.threadID,c('MessagingTag').INBOX);}.bind(this),m;}k.prototype.render=function(){var l=this.props.thread,m=!!l&&c('MessageRequestUtils').isFiltered(l);return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPendingActions.react').__setRef('FantaPendingActions.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{isFiltered:m,onDeleteClick:this.$FantaPendingActions1,onReplyClick:this.$FantaPendingActions2})});};f.exports=k;}),null);
__d('FantaTabComposer.react',['fbt','ChatTabComposerContainer.react','FantaTabActions','Keys','LogHistory','MercuryIDs','MercuryThreadIDMap','MercuryThreads','PhotosUploadWaterfall','React','TypingDetectorController','WaterfallIDGenerator','WorkFileUploadsGating','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreadIDMap').get(),l=c('MercuryThreads').get(),m=c('LogHistory').getInstance('chat_tab_view'),n=c('React').PropTypes,o=/^\s*$/;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$FantaTabComposer3=c('WaterfallIDGenerator').generate(),this.$FantaTabComposer4=function(v,w){var x=this.props.threadID;k.getServerIDFromClientID(x,function(y){this.$FantaTabComposer2=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(x),v,'mercury-chat',null,y,w);}.bind(this));}.bind(this),this.$FantaTabComposer14=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').UPLOAD_START,v);this.props.onSendPhoto(v,this.$FantaTabComposer1.onSend);this.$FantaTabComposer16('submit',v);this.focusInput();}.bind(this),this.$FantaTabComposer8=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer10=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer12=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CANCEL_DURING_UPLOAD,v);this.$FantaTabComposer16('canceled',v);}.bind(this),this.$FantaTabComposer13=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').ALL_UPLOADS_DONE,v);this.$FantaTabComposer16('completed',v);var w=v.image_ids.length||v.attachments.length;this.$FantaTabComposer17(w);}.bind(this),this.$FantaTabComposer9=function(){this.props.onSendMessage('',this.$FantaTabComposer1.onSend);}.bind(this),this.$FantaTabComposer11=function(v){this.props.onSelectSticker(v,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer6=function(v,w,x){this.props.onSendHotLike(v.emoji,w,x,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer7=function(v){this.$FantaTabComposer1.getInput().insertEmoji(v);}.bind(this),this.$FantaTabComposer5=function(event){var v=this.props.threadID;if(event.keyCode===c('Keys').RETURN&&!event.shiftKey){this.props.onSendMessage({message:this.$FantaTabComposer18(),mentions:this.$FantaTabComposer19()},this.$FantaTabComposer1.onSend);return;}if(event.keyCode===c('Keys').DOWN&&event.shiftKey&&this.hasEmptyInput()){c('FantaTabActions').minimizeTab(v);return;}}.bind(this),r;}p.prototype.componentDidMount=function(){var q=this.props,r=q.threadID,s=q.participants;if(this.props.isFocused&&s.length>0&&!l.isEmptyLocalThread(r))this.focusInput();};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused&&this.props.isFocused!==q.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();};p.prototype.componentWillUnmount=function(){this.$FantaTabComposer2&&this.$FantaTabComposer2.destroy();};p.prototype.render=function(){var q=this.props,r=q.participants,s=q.threadID,t=q.viewer;if(r.length===0)return c('React').createElement('div',null);return c('React').createElement(c('ChatTabComposerContainer.react'),{disableFileUploads:!c('WorkFileUploadsGating').canUploadFiles,initializeThingsWithInputFn:this.$FantaTabComposer4,inputKeyDown:this.$FantaTabComposer5,onBlur:c('emptyFunction'),onCustomLikeSelect:this.$FantaTabComposer6,onEmojiSelect:this.$FantaTabComposer7,onEscape:this.props.onEscape,onFileUploadFail:this.$FantaTabComposer8,onMount:function u(){},onP2PTrigger:this.$FantaTabComposer9,onPhotoUploadFail:this.$FantaTabComposer10,onStickerSelect:this.$FantaTabComposer11,onTab:this.props.onTab,onUploadCancel:this.$FantaTabComposer12,onUploadComplete:this.$FantaTabComposer13,onUploadSubmit:this.$FantaTabComposer14,placeholder:h._("Type a message..."),ref:function(u){this.$FantaTabComposer1=u;if(this.props.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();}.bind(this),resizeFn:function u(){},threadID:s,viewer:t});};p.prototype.$FantaTabComposer15=function(q,r){c('PhotosUploadWaterfall').sendSignal(babelHelpers['extends']({qn:this.$FantaTabComposer3,step:q,uploader:c('PhotosUploadWaterfall').APP_CHAT},r||{}));};p.prototype.$FantaTabComposer17=function(q){if(q===0)return;this.$FantaTabComposer15(c('PhotosUploadWaterfall').POST_PUBLISHED,{count:q});this.$FantaTabComposer3=c('WaterfallIDGenerator').generate();};p.prototype.$FantaTabComposer16=function(q,r){m.debug('photo_uploader:'+q,'{}');};p.prototype.focusInput=function(){this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().focus();};p.prototype.$FantaTabComposer18=function(){return this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().getValue()||'';};p.prototype.$FantaTabComposer19=function(){if(!this.$FantaTabComposer1)return null;var q=this.$FantaTabComposer1.getInput();return q.getMentions?q.getMentions():null;};p.prototype.hasEmptyInput=function(){return o.test(this.$FantaTabComposer18());};p.propTypes={isFocused:n.bool.isRequired,onEscape:n.func.isRequired,onSelectSticker:n.func.isRequired,onSendHotLike:n.func.isRequired,onSendMessage:n.func.isRequired,onSendPhoto:n.func.isRequired,onTab:n.func.isRequired,participants:n.array.isRequired,threadID:n.string.isRequired,viewer:n.string.isRequired};f.exports=p;}),null);
__d('FantaTabSheetPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_w_z"},c('React').createElement(c('XUISpinner.react'),null));};f.exports=i;}),null);
__d('FantaTabSheet.react',['cx','BootloadedComponent.react','CurrentUser','FantaTabSheetActions','FantaTabSheetPlaceholder.react','FantaTypeTabContents','JSResource','MercuryIDs','MercuryMessages','MercuryParticipants','MercurySheetPolicy','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryMessages').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldComponentUpdate=function(n){var o=this.props;return o.threadID!==n.threadID||!o.tabContent.equals(n.tabContent);};m.prototype.render=function(){var n=this.props,o=n.threadID,p=n.tabContent,q=p.openSheet,r=p.pageIndicatorDescription,s=p.privacyController,t=p.thread,u=p.typeahead,v=void 0;switch(q){case c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetChatThreadIsMuted.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetNameConversation.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet:var w=c('MercuryIDs').getUserIDFromThreadID(o);if(w){var x=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(w));if(x&&s)v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserBlockedTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),gender:x.gender,key:q,privacyActionController:s,shortName:x.short_name});}break;case c('MercurySheetPolicy').sheets.ChatOfflineTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetOffline.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,privacyController:s,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet:case c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetReadOnly.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.FantaAddFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddMoreFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetMessageBlocked.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusBypassSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserTimezoneSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),data:p.timezoneInfo,key:q,onDismiss:function ca(){return c('FantaTabSheetActions').closeUserTimezoneSheet(o);},resize:c('emptyFunction'),threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUploadWarningTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUploadWarningTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet:if(!c('MercuryIDs').isCanonical(o))v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatNoRecipientsTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaNewMessagesTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEmployeeAwaySheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEmployeeAwaySheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsPersonalUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsWorkUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatPageResponsivenessIndicator.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),description:r,key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaEventReminderTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatAppointmentBanner:if(t){var y=k.getCurrentlyLoadedMessages(o);v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatAppointmentBannerRoot.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),pageID:t.other_user_fbid,userID:c('CurrentUser').getID(),count:100,messageList:y,appointmentBannerDidUpdate:c('emptyFunction'),key:q,threadID:o});}break;case c('MercurySheetPolicy').sheets.ChatMontageSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatMontageSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o,onResize:c('emptyFunction')});break;case c('MercurySheetPolicy').sheets.ChatJoinCallSheet:if(t){var z=t.rtc_call_data,aa=t.thread_fbid;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatJoinCallSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,rtcCallData:z,threadFBID:aa});}break;case c('MercurySheetPolicy').sheets.ChatRoomAssociatedObjectSheet:if(t){var ba=t.associated_object;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatRoomAssociatedObjectSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,associatedObject:ba});}break;}if(v)return c('React').createElement('div',{className:"_1sk5"},c('React').createElement('div',{className:"_1sk6"},v));return null;};function m(){i.apply(this,arguments);}m.propTypes={threadID:l.string.isRequired,tabContent:l.object.isRequired};f.exports=m;}),null);
__d('FantaTabMain.react',['cx','fbt','BootloadOnRender.react','ChatBehavior','ChatTabBlinking','CurrentUser','DragDropTarget','Event','FantaAvailableStatus','FantaChatHeaderContainer.react','FantaConversationScroller.react','FantaDragAndDrop.react','FantaMessageActions','FantaPageComposerNullState.react','FantaPendingActions.react','FantaTabActions','FantaTabComposer.react','FantaTabSheet.react','FantaTypeTab','FantaTypeTabContents','immutable','JSResource','Keys','LazyComponent.react','MercuryIDs','MessageRequestUtils','Parent','React','ReactDOM','SimpleXUIDialog','WorkFileUploadsGating','WorkFocusMode','convertMIGColorToFIGColor','getVendorPrefixedEventName','ifRequired','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false},this.$FantaTabMain13=function(event){var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id);if(!t||!u)if(!event.relatedTarget||!event.target){this.$FantaTabMain7=setTimeout(function(){this.$FantaTabMain7=null;c('FantaTabActions').blurTab(this.props.tab.id);}.bind(this),100);}else c('setImmediate')(function(){return c('FantaTabActions').blurTab(this.props.tab.id);}.bind(this));}.bind(this),this.$FantaTabMain14=function(event){if(this.$FantaTabMain7){clearTimeout(this.$FantaTabMain7);this.$FantaTabMain7=null;return;}var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id),v=event.target;if(!(v&&v.classList&&v.classList.contains("_3olu")))if(!t||!u)c('setImmediate')(function(){return c('FantaTabActions').focusTab(this.props.tab.id);}.bind(this));}.bind(this),this.$FantaTabMain16=function(t){c('FantaMessageActions').linkPreview(this.props.tab.id,t);}.bind(this),this.$FantaTabMain15=function(t){c('FantaMessageActions').prepareFilesForSend(this.props.tab.id,t);}.bind(this),this.$FantaTabMain10=function(t){if(t.keyCode===c('Keys').ESC){this.$FantaTabMain2(true);t.preventDefault();t.stopPropagation();}}.bind(this),this.$FantaTabMain11=function(t){if(t.keyCode===c('Keys').TAB)this.$FantaTabMain12(t);}.bind(this),this.$FantaTabMain12=function(event){var t=this.props.raisedTabCount;if(t>1){event.preventDefault();this.$FantaTabMain3(event.ctrlKey,event.shiftKey);}}.bind(this),this.$FantaTabMain2=function(t){if(!this.refs.composer||this.refs.composer.hasEmptyInput()){this.$FantaTabMain17(t);}else this.$FantaTabMain18(t);}.bind(this),p;}n.prototype.componentWillMount=function(){this.$FantaTabMain2=c('throttle')(this.$FantaTabMain2,100);this.$FantaTabMain3=c('throttle')(this.$FantaTabMain3,100);};n.prototype.componentDidMount=function(){this.$FantaTabMain8();this.$FantaTabMain9();};n.prototype.componentDidUpdate=function(){this.$FantaTabMain9();};n.prototype.componentWillUnmount=function(){this.$FantaTabMain4&&this.$FantaTabMain4.disable();};n.prototype.shouldComponentUpdate=function(o,p){var q=this.props,r=this.state;return q.hasFetchedAll!==o.hasFetchedAll||q.isFocused!==o.isFocused||q.isLastGroupTab!==o.isLastGroupTab||!q.messages.equals(o.messages)||!q.tab.equals(o.tab)||!q.tabContent&&!!o.tabContent||q.tabContent&&!q.tabContent.equals(o.tabContent)||q.thread!==o.thread||r.closing!==p.closing;};n.prototype.$FantaTabMain9=function(){var o=this.props,p=o.tab,q=o.thread,r=p.id;if(!q)return;var s=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!s)return;var t=q.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(t!==undefined){var u=!!t&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(u){c('ChatTabBlinking').blinkTab(r,{getTabElem:function v(){return s;},isFocused:function(){return this.props.isFocused;}.bind(this),isHovered:function v(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.hasFetchedAll,q=o.isFocused,r=o.isLastGroupTab,s=o.messages,t=o.onLoadMoreMessages,u=o.onSelectSticker,v=o.onSendHotLike,w=o.onSendMessage,x=o.onSendPhoto,y=o.showContextBanner,z=o.tab,aa=o.tabContent,ba=o.thread,ca=z.id,da=c('CurrentUser').getID(),ea=aa&&aa.fileUploader,fa=aa&&aa.sharePreview,ga=ea&&ea.uploadingFiles,ha=ea&&ea.uploadedFiles,ia=ba&&c('convertMIGColorToFIGColor')(ba.custom_color),ja=aa&&aa.nullPageID,ka=aa&&aa.nullPageTitle,la=ja&&ka&&ba&&ba.message_count===0,ma=ba&&ba.participants||[],na=aa&&aa.threadPreviewRecipients||c('immutable').List(),oa=ma.length>0?ma:na.toArray(),pa=ba&&c('MessageRequestUtils').isMessageRequest(ba)?c('React').createElement(c('FantaPendingActions.react'),{thread:ba,threadID:ca}):la&&ja&&ka?c('React').createElement(c('FantaPageComposerNullState.react'),{nullPageID:ja,nullPageTitle:ka,threadID:ca}):c('React').createElement('div',{className:'fbNubFlyoutFooter'},c('React').createElement(c('FantaTabComposer.react'),{isFocused:q,onEscape:this.$FantaTabMain10,onKeyDown:this.$FantaTabMain10,onKeyPress:this.$FantaTabMain11,onSelectSticker:u,onSendHotLike:v,onSendMessage:w,onSendPhoto:x,onTab:this.$FantaTabMain12,ref:'composer',participants:oa,threadID:ca,viewer:da})),qa=c('FantaAvailableStatus').isAvailable(ba,ca),ra=aa&&aa.joinableInterstitialData?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatJoinableInterstitialPreview.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{data:aa.joinableInterstitialData,isActive:q,onClose:this.$FantaTabMain2})}):c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement(c('FantaChatHeaderContainer.react'),{customColor:ia,isFocused:q,isLastGroupTab:r,onClose:this.$FantaTabMain2,thread:ba,threadID:ca,viewer:da}),c('React').createElement('div',{className:"_1ia"+(' '+"_2sz2"),ref:function(sa){this.$FantaTabMain5=sa;}.bind(this)},c('React').createElement(c('FantaTabSheet.react'),{tabContent:aa,threadID:ca}),c('React').createElement(c('FantaConversationScroller.react'),{hasFetchedAll:p,isFocused:q,messages:s,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput();}.bind(this),onLoadMoreMessages:t,showContextBanner:y,thread:ba,threadID:ca,viewer:da}),c('React').createElement('div',{className:"_3bpu"}),c('React').createElement('div',{className:"_2hc2"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('P2PChatThreadBannerContainer.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{isVisible:true,otherUserID:c('MercuryIDs').getUserIDFromThreadID(ca),threadID:ca})})),c('React').createElement('div',{className:"_4g6x"},c('React').createElement('div',{className:"_4g6y"},c('React').createElement('div',{className:"_4g6z _4g71"},i._("Drag Link\/Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))),pa,c('React').createElement(c('FantaDragAndDrop.react'),{threadID:ca,uploadedFiles:ha,uploadingFiles:ga,sharePreview:fa})));return c('React').createElement('div',{className:c('joinClasses')((this.state.closing?"_2suj":'')+(' '+"_3_9e")+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(qa?' '+"_4-0b":'')+(' '+"fbNub")+(' '+"_50-v")+(q?' '+"focusedTab":'')+(' '+"opened")+(' '+"_27_3"),'fantaTabMain-'+ca),onBlur:this.$FantaTabMain13,onFocus:this.$FantaTabMain14,onKeyDown:this.$FantaTabMain10,onKeyPress:this.$FantaTabMain11,ref:'root',role:'presentation'},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent',role:'complementary'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},ra)));};n.prototype.$FantaTabMain8=function(){if(c('WorkFileUploadsGating').canUploadFiles&&!this.$FantaTabMain4){var o=c('ReactDOM').findDOMNode(this.$FantaTabMain5);if(o){var p=new (c('DragDropTarget'))(o);this.$FantaTabMain4=p;p.setOnFilesDropCallback(this.$FantaTabMain15);p.setOnURLDropCallback(this.$FantaTabMain16);p.enable();}}};n.prototype.$FantaTabMain3=function(o,p){if(!o)if(p){c('FantaTabActions').focusPreviousTab();}else c('FantaTabActions').focusNextTab();};n.prototype.$FantaTabMain17=function(o){var p=this.props,q=p.tab,r=p.tabContent,s=r&&r.threadPreviewID?r.threadPreviewID:q.id,t=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMain1=setTimeout(function(){return o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);},1.2*c('ifRequired')('cssVar',function(v){return "200ms".replace(l,'');},function(){return 200;}));var u=c('Event').listen(t,c('getVendorPrefixedEventName')('animationend'),function(v){if(v.animationName==='closeChatTab'){o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);clearTimeout(this.$FantaTabMain1);u.remove();}}.bind(this));this.setState({closing:true});};n.prototype.$FantaTabMain18=function(o){var p=this.props.tab,q=p.id;c('FantaTabActions').blurTab(q);var r=i._("Are you sure you want to close this chat window?"),s=i._("You haven't sent your message.");c('SimpleXUIDialog').showConfirm(r,s,function(t){if(t){o?c('FantaTabActions').closeAndTabNext(q):c('FantaTabActions').closeTab(q);}else c('FantaTabActions').focusTab(q);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.propTypes={hasFetchedAll:m.bool.isRequired,isFocused:m.bool.isRequired,isLastGroupTab:m.bool.isRequired,messages:m.object,onLoadMoreMessages:m.func.isRequired,onSelectSticker:m.func.isRequired,onSendHotLike:m.func.isRequired,onSendMessage:m.func.isRequired,onSendPhoto:m.func.isRequired,raisedTabCount:m.number,showContextBanner:m.bool,tab:m.object.isRequired,tabContent:m.object,thread:m.object};f.exports=n;}),null);
__d('FantaTabMainLoader.react',['FantaGetMessageActions','FantaMessageActions','FantaTabMain.react','FantaTypeTab','FantaTypeTabContents','immutable','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabMainLoader1=function(){var q=this.props.tab;c('FantaGetMessageActions').fetchMoreMessages(q.id);}.bind(this),this.$FantaTabMainLoader2=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendSticker(s.id,q,r);}.bind(this),this.$FantaTabMainLoader3=function(q,r,s,t){var u=this.props.tab;c('FantaMessageActions').sendHotLike(u.id,q,r,s,t);}.bind(this),this.$FantaTabMainLoader4=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendMessage(s.id,q,r);}.bind(this),this.$FantaTabMainLoader5=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendPhoto(s.id,q,r);}.bind(this),m;}k.prototype.shouldComponentUpdate=function(l){var m=this.props;return m.isFocused!==l.isFocused||m.isLastTabOfType!==l.isLastTabOfType||!m.tab.equals(l.tab)||!m.tabContent.equals(l.tabContent);};k.prototype.render=function(){var l=this.props,m=l.isFocused,n=l.isLastTabOfType,o=l.raisedTabCount,p=l.tab,q=l.tabContent,r=q.hasFetchedAll,s=q.showContextBanner,t=q.thread,u=q.threadPreviewID,v=q.messages,w=u?p.id+'-'+u:p.id;if(!q)return c('React').createElement('div',{key:'noContent-'+w});if(!v)v=c('immutable').List();return c('React').createElement(c('FantaTabMain.react'),{hasFetchedAll:r,isFocused:m,isLastGroupTab:n,key:w,messages:v,onLoadMoreMessages:this.$FantaTabMainLoader1,onSelectSticker:this.$FantaTabMainLoader2,onSendHotLike:this.$FantaTabMainLoader3,onSendMessage:this.$FantaTabMainLoader4,onSendPhoto:this.$FantaTabMainLoader5,raisedTabCount:o,showContextBanner:s,tab:p,tabContent:q,thread:t});};k.propTypes={isFocused:j.bool.isRequired,isLastTabOfType:j.bool.isRequired,raisedTabCount:j.number,tab:j.object.isRequired,tabContent:j.object};f.exports=k;}),null);
__d('FantaTabMinimized.react',['cx','fbt','ChatBehavior','ChatTabBlinking','ChatTabHeaderContainer.react','CurrentUser','Event','FantaAvailableStatus','FantaTabActions','FantaTypeTab','FantaTypeTabContents','React','ReactDOM','SimpleXUIDialog','WorkFocusMode','emptyFunction','getVendorPrefixedEventName','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false},this.$FantaTabMinimized4=function(){var t=this.props.tabContent;if(!t||t&&t.composerText.length===0){this.$FantaTabMinimized5();}else this.$FantaTabMinimized6();}.bind(this),this.$FantaTabMinimized3=function(event){var t=event.target;if(t&&t.classList&&!t.classList.contains('button')){event.preventDefault();c('FantaTabActions').unminimizeTab(this.props.tab.id);}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$FantaTabMinimized2();};n.prototype.componentDidUpdate=function(){this.$FantaTabMinimized2();};n.prototype.shouldComponentUpdate=function(o){var p=this.props;return !p.tab.equals(o.tab)||!p.tabContent&&!!o.tabContent||!!p.tabContent&&!p.tabContent.equals(o.tabContent);};n.prototype.$FantaTabMinimized2=function(){var o=this.props,p=o.tab,q=o.tabContent,r=p.id;if(!q)return;var s=q.thread;if(!s)return;var t=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!t)return;var u=s.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(u!==undefined){var v=!!u&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(v){c('ChatTabBlinking').blinkTab(r,{getTabElem:function w(){return t;},isFocused:function w(){return false;},isHovered:function w(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.thread&&q.thread.custom_color,s=r?{color:r}:null,t=p.id,u=q&&!!q.thread&&c('FantaAvailableStatus').isAvailable(q.thread,t);return c('React').createElement('div',{className:"_4cd8"+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(u?' '+"_4-0b":'')+(' '+"_27_3"),ref:'root'},c('React').createElement('div',{className:(this.state.closing?"_2suj":'')+(' '+"clearfix")+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!r?' '+"_1m34":''),style:s},c('React').createElement(c('ChatTabHeaderContainer.react'),{attachmentsShelf:document.createElement('div'),isActive:false,isRaised:false,isTyping:false,nameConversationFunc:c('emptyFunction'),rtcNuxShown:false,sheetController:{openAddFriendsSheet:c('emptyFunction'),openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:c('emptyFunction'),threadID:this.props.tab.id,viewer:c('CurrentUser').getID(),onClick:this.$FantaTabMinimized3,onCloseClick:this.$FantaTabMinimized4,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function v(){},onRTCNuxCloseButtonClick:c('emptyFunction'),onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')})));};n.prototype.$FantaTabMinimized5=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMinimized1=setTimeout(function(){return c('FantaTabActions').closeAndTabNext(r);},1.2*c('ifRequired')('cssVar',function(u){return "200ms".replace(l,'');},function(){return 200;}));var t=c('Event').listen(s,c('getVendorPrefixedEventName')('animationend'),function(u){if(u.animationName==='closeChatTab'){c('FantaTabActions').closeAndTabNext(r);clearTimeout(this.$FantaTabMinimized1);t.remove();}}.bind(this));this.setState({closing:true});};n.prototype.$FantaTabMinimized6=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=i._("Are you sure you want to close this chat window?");c('FantaTabActions').blurTab(r);var t=i._("You haven't sent your message.");c('SimpleXUIDialog').showConfirm(s,t,function(u){if(u){c('FantaTabActions').closeAndTabNext(r);}else c('FantaTabActions').focusTab(r);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.propTypes={tab:m.object.isRequired,tabContent:m.object};f.exports=n;}),null);
__d('FantaMercuryTabsWithMain.react',['Bootloader','FantaAppStore','FantaCookieUtil','FantaMercuryTabOverflowBootloader.react','FantaTabActions','FantaTabGroup.react','FantaTabMainLoader.react','FantaTabMinimized.react','FantaTypeTab','FantaTypeTabContents','FantaTypeTabGroup','FluxContainer','immutable','LazyComponent.react','LoadOnRender.react','MercuryIDs','PresenceState','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=function l(m){c('Bootloader').loadModules(["messengerReasonDialogContainerReact"],function(n){var o=n.comp;return m(o);},'FantaMercuryTabsWithMain.react');};h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.getStores=function(){return [c('FantaAppStore')];};k.calculateState=function(){return {tabGroup:c('FantaAppStore').getState().tabGroup,tabContents:c('FantaAppStore').getState().mercury.tabContents};};k.prototype.componentWillMount=function(){if(this.props.loadDataOnMount)c('FantaTabActions').loadFromData(c('FantaCookieUtil').convertCookieData(c('PresenceState').get()));};k.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('FantaTabGroup.react'),{MainComponent:c('FantaTabMainLoader.react'),MinimizedComponent:c('FantaTabMinimized.react'),OverflowComponent:c('FantaMercuryTabOverflowBootloader.react'),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$FantaMercuryTabsWithMain1}),c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),null),loader:j,placeholder:c('React').createElement('span',null)}));};k.prototype.$FantaMercuryTabsWithMain1=function(l){return c('MercuryIDs').isGroupChat(l.id);};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k);}),null);
__d('FantaTabsReactApp',['ChatPerfInstrumentation','FantaMercuryTabsWithMain.react','FantaTabsAppBase','React','ReactDOM','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;k.prototype.initializeFantaData=function(){e(['FantaAppStore','FantaCookieUtil','FantaGetMessageActions','FantaTabActions','MercuryThreadInformer','PresenceState'],function(l,m,n,o,p,q){o.loadFromData(m.convertCookieData(q.get()));q.registerStateLoader(function(r){return o.loadFromData(m.convertCookieData(r,l.getState().tabGroup));});q.registerStateStorer(function(r){var s=l.getState().tabGroup;if(!j||j&&!j.equals(s)){j=s;return m.createCookieData(s,r);}else return r;});l.addListener(function(){return q.doSync();});p.get().subscribe('threads-updated',function(r,s){Object.keys(s).forEach(function(t){c('setImmediate')(function(){n.refreshThread(t);});});});c('ChatPerfInstrumentation').logInitData();});};k.prototype.initializeFantaUI=function(){e(['FantaAppStore','FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q,r){q.init();r.init();c('ReactDOM').render(this.getViewComponent(),this.tabsElem);m.onMessagesReceived(function(t,u){c('setImmediate')(function(){n.receivedNewMessage(t,u);});});p.init(this.tabsElem);c('ChatPerfInstrumentation').logInitUI();var s=l.getState().tabGroup.tabs;if(s.toArray().length===0)c('ChatPerfInstrumentation').logDisplayDone();}.bind(this));};k.prototype.getViewComponent=function(){return c('React').createElement(c('FantaMercuryTabsWithMain.react'),{loadDataOnMount:false});};function k(){h.apply(this,arguments);}f.exports=new k();}),null);