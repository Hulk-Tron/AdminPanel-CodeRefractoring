if (self.CavalryLogger) { CavalryLogger.start_js(["UhHaf"]); }

__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",ATTACHMENT:"attachment",NETEGO:"netego",COMPOSER_POST:"composer_post"};}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports={DEBUG:"debug",FANNING:"fanning",NONE:"none",STORY_CLICK:"story_click",UFI:"ufi"};}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}});}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/led\/async\/follow_up_feed_unit\/",{ft_id:{type:"String"},story_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}});}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_product\/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}});}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},reaction_type:{type:"Enum",enumType:0}});}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/comment_chaining\/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"}});}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/group_related_stories\/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/political_issue_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false},ft_id:{type:"String"}});}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});}),null);
__d("XSpokespersonProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spokesperson\/related_product\/",{ft_id:{type:"String"},reaction_type:{type:"Enum",enumType:0}});}),null);
__d('PubcontentFeedChainingControllerX',['csx','cx','AggregatedLinkComposerConfig','Arbiter','AsyncRequest','AttachmentIssueDiversityShareConstants','AttachmentRelatedShareConstants','ContextualRecommendationsFeedChainingConfig','ContextualThing','CSS','DataAttributeUtils','DOM','DOMQuery','Event','FeedAdsChainingConfig','LEDExperimentEntryPoint','NavigationMessage','PageContextualRecommendationsTrigger','PageLikeConstants','Parent','PubcontentFeedChainingConfig','PubcontentFeedChainingInjectionUtils','PubcontentPoliticalIssueChainingConfig','PubcontentRelatedShareChainingConfig','PubcontentTopicChainingConfig','RelatedEventsPivotChainingConfig','Run','SearchRelatedPostsPivotChainingConfig','StoryInlinePivotChainingConfig','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','URI','VideoChannelViewVariables','XEventRelatedEventsPivotController','XFeedAdsChainingController','XLEDFollowUpFeedUnitController','XPubcontentCommerceProductChainingController','XPubcontentFeedChainingController','XPubcontentFeedCommentChainingController','XPubcontentGroupRelatedStoriesChainingController','XPubcontentInlineStoryPivotChainingController','XPubcontentPoliticalIssueChainingController','XPubcontentRelatedShareChainingController','XPubcontentRelatedVideoChainingController','XPubcontentTopicChainingController','XRelatedGamesChainingController','XSearchRelatedPostsPivotController','XSpokespersonProductChainingController','cxodecode','getOrCreateDOMID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='ei',k='ad_fan_page_action',l='ad_like_page_post_action',m='page_story_like_action',n='political_issue_story_article_click_action',o='related_share_article_click',p='related_product_click',q='related_share_video_click',r='related_share_video_view',s='page_share_like_action',t='topic_story_like_action',u='story_click_for_pivot_action',v='story_like_pivot_action',w='event_join',x='composer_publish_action',y='place_checkin_story_action',z='LIKE',aa='COMMENT',ba=500,ca=c('VideoChannelViewVariables').channelPivots,da="._5v9_",ea=null,fa=false,ga=null,ha=null;ia.init=function(ma){var na=ma.isLazy,oa=ma.srs,pa=ma.sdrs;if(oa&&pa){ga=c('cxodecode')(oa);ha=c('cxodecode')(pa);}if(!ea)ea=new ia({isLazy:na});if(!fa){c('Run').onLeave(ia.cleanup);c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,ia.cleanup);fa=true;}};ia.cleanup=function(){if(ea){ea.cleanup();ea=null;}};function ia(ma){var na=ma.isLazy;this.$PubcontentFeedChainingControllerX1=c('PubcontentFeedChainingConfig');this.$PubcontentFeedChainingControllerX2=c('ContextualRecommendationsFeedChainingConfig');this.$PubcontentFeedChainingControllerX3=c('FeedAdsChainingConfig');this.$PubcontentFeedChainingControllerX4=c('PubcontentRelatedShareChainingConfig');this.$PubcontentFeedChainingControllerX5=c('PubcontentTopicChainingConfig');this.$PubcontentFeedChainingControllerX6=c('PubcontentPoliticalIssueChainingConfig');this.$PubcontentFeedChainingControllerX7=c('StoryInlinePivotChainingConfig');this.$PubcontentFeedChainingControllerX8=c('RelatedEventsPivotChainingConfig');this.$PubcontentFeedChainingControllerX9=c('SearchRelatedPostsPivotChainingConfig');this.$PubcontentFeedChainingControllerX10={};this.$PubcontentFeedChainingControllerX11=null;this.$PubcontentFeedChainingControllerX12=new (c('SubscriptionsHandler'))();this.$PubcontentFeedChainingControllerX12.addSubscriptions(this.$PubcontentFeedChainingControllerX13(c('PageLikeConstants').LIKED,na,this.$PubcontentFeedChainingControllerX14.bind(this)),this.$PubcontentFeedChainingControllerX13(c('UFIUIEvents').ActionLinkLike,na,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX13(c('UFIUIEvents').ReactionButtonClicked,na,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX13(c('UFIUIEvents').Comment,na,this.$PubcontentFeedChainingControllerX16.bind(this)),this.$PubcontentFeedChainingControllerX13('composer/publish',na,this.$PubcontentFeedChainingControllerX17.bind(this)),this.$PubcontentFeedChainingControllerX13('LitestandComposer/publish',na,this.$PubcontentFeedChainingControllerX17.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,na,this.$PubcontentFeedChainingControllerX18.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentIssueDiversityShareConstants').ARTICLE_CLICK,na,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').VIDEO_CLICK,na,this.$PubcontentFeedChainingControllerX20(this.$PubcontentFeedChainingControllerX21.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW,na,this.$PubcontentFeedChainingControllerX20(this.$PubcontentFeedChainingControllerX22.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,na,this.$PubcontentFeedChainingControllerX20(this.$PubcontentFeedChainingControllerX22.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').GAME_CLICK,na,this.$PubcontentFeedChainingControllerX23.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').PHOTO_CLICK,na,this.$PubcontentFeedChainingControllerX20(this.$PubcontentFeedChainingControllerX24.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').EVENT_JOIN,na,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,na,this.$PubcontentFeedChainingControllerX26.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').MAP_CLICK,na,this.$PubcontentFeedChainingControllerX27.bind(this)),this.$PubcontentFeedChainingControllerX13(c('AttachmentRelatedShareConstants').ACTION_BUTTON_CLICK,na,this.$PubcontentFeedChainingControllerX28.bind(this)));}ia.prototype.$PubcontentFeedChainingControllerX13=function(event,ma,na){var oa=ma?[event,event+'.lazy']:[event];return c('Arbiter').subscribe(oa,na);};ia.prototype.cleanup=function(){this.$PubcontentFeedChainingControllerX12&&this.$PubcontentFeedChainingControllerX12.release();this.$PubcontentFeedChainingControllerX12=null;};ia.getAdClientTokenIndex=function(){return j;};ia.prototype.$PubcontentFeedChainingControllerX14=function(ma,na){var oa=this.findAdClientToken(na.target);if(oa){this.$PubcontentFeedChainingControllerX29(na.target,{origin:k,actor_id:na.profile_id,client_token:oa});}else this.$PubcontentFeedChainingControllerX30(na.target,{origin:na.origin,actor_id:na.profile_id,trigger:c('PageContextualRecommendationsTrigger').FANNING,chaining_type:'contextual_recommendations',reaction_type:na.reaction_type});};ia.prototype.$PubcontentFeedChainingControllerX15=function(ma,na){if(!na.ft_id||!na.target||!na.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX31(this.findStory(na.target))||this.$PubcontentFeedChainingControllerX32(this.findStory(na.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(na.ft_id,function(oa,pa){var qa=this.findAdClientToken(oa);if(qa&&pa.isshare){this.$PubcontentFeedChainingControllerX29(oa,{actor_id:pa.actorid,origin:l,ft_id:pa.entidentifier,client_token:qa});}else if(pa.isActorFBEntity){this.$PubcontentFeedChainingControllerX33(oa,{ft_id:pa.entidentifier,reaction_type:na.reaction_type,chaining_type:'contextual_recommendations',origin:z});}else if(pa.isownerpage){var ra=pa.isshare?s:m;this.$PubcontentFeedChainingControllerX30(oa,{actor_id:pa.actorid,content_id:pa.entidentifier,ft_id:pa.entidentifier,origin:ra,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations',reaction_type:na.reaction_type});}else if(pa.grouporeventid){if(this.shouldPuntGroupChaining(oa))return;this.$PubcontentFeedChainingControllerX34(oa,{post_id:pa.entidentifier,origin:z});}else if(pa.isshare){this.$PubcontentFeedChainingControllerX30(oa,{actor_id:pa.actorid,content_id:pa.entidentifier,ft_id:pa.entidentifier,origin:s,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations',reaction_type:na.reaction_type});}else if(pa.isplacecheckin){this.$PubcontentFeedChainingControllerX35(oa,{ft_id:pa.entidentifier,origin:y},c('LEDExperimentEntryPoint').LIKE);}else{var sa=this.$PubcontentFeedChainingControllerX36(oa,{origin:v,ft_id:pa.entidentifier});if(!sa)this.$PubcontentFeedChainingControllerX37(oa,{origin:t,ft_id:pa.entidentifier});}}.bind(this,na.target));};ia.prototype.$PubcontentFeedChainingControllerX16=function(ma,na){if(!na.ft_id||!na.target)return;if(!this.$PubcontentFeedChainingControllerX31(this.findStory(na.target))||this.$PubcontentFeedChainingControllerX32(this.findStory(na.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(na.ft_id,function(oa,pa){if(pa.grouporeventid){if(this.shouldPuntGroupChaining(oa))return;this.$PubcontentFeedChainingControllerX38(oa,{origin:aa,event_id:pa.grouporeventid});}else this.$PubcontentFeedChainingControllerX39(na.target,{origin:o,action_trigger:aa,ft_id:pa.entidentifier});}.bind(this,na.target));};ia.prototype.$PubcontentFeedChainingControllerX36=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XPubcontentInlineStoryPivotChainingController').getURIBuilder().setString('origin',na.origin);if(na.story_id)pa.setString('storyid',String(na.story_id));if(na.ft_id)pa.setString('ftid',String(na.ft_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX37=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa||!this.$PubcontentFeedChainingControllerX42())return;var pa=c('XPubcontentTopicChainingController').getURIBuilder().setString('ft_id',na.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return;};ia.prototype.$PubcontentFeedChainingControllerX43=function(ma,na,oa){var pa=na.ft_id;if(!pa){oa&&oa();return;}var qa=this.findStory(ma);if(ka(qa)||la(qa)){oa&&oa();return;}var ra=this.$PubcontentFeedChainingControllerX40(ma,na);if(!ra){oa&&oa();return;}var sa=c('XPubcontentPoliticalIssueChainingController').getURIBuilder().setString('ft_id',pa);new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX41(ra.story.id);oa&&oa();}.bind(this)).setRelativeTo(ra.chainingWrapper).setURI(sa.getURI()).setAllowCrossPageTransition(true).setHandler(function(ta){if(!ta.payload.is_chained){this.$PubcontentFeedChainingControllerX41(ra.story.id);oa&&oa();}}.bind(this)).send();return;};ia.prototype.$PubcontentFeedChainingControllerX24=function(ma,na){var oa=this;oa.$PubcontentFeedChainingControllerX36(na.attachment,{origin:u,story_id:na.storyid});};ia.prototype.$PubcontentFeedChainingControllerX18=function(ma,na){this.$PubcontentFeedChainingControllerX44(ma,na,true);};ia.prototype.$PubcontentFeedChainingControllerX19=function(ma,na){this.$PubcontentFeedChainingControllerX44(ma,na,false);};ia.prototype.$PubcontentFeedChainingControllerX44=function(ma,na,oa){if(c('AggregatedLinkComposerConfig').no_chained_related_stories==='true')return;var pa=this,qa=this.findStory(na.attachment),ra=c('DOMQuery').scry(c('DOMQuery').getRootElement(),'#initial_browse_result').length>0;if(ra)return;var sa;if(na.is_right_click){sa=0;}else sa=c('AttachmentRelatedShareConstants').EVENT_DELAY;setTimeout(function(){if(qa){var ta=pa.findAttachment(qa);if(ta)na.attachment=ta;}na.ft_id=pa.findFeedbackTargetId(qa);pa.$PubcontentFeedChainingControllerX43(na.attachment,{origin:n,ft_id:na.ft_id},function(){if(!oa)return;na.origin=o;pa.$PubcontentFeedChainingControllerX45(na.attachment,na);});},sa);};ia.prototype.$PubcontentFeedChainingControllerX21=function(ma,na){if(!this.$PubcontentFeedChainingControllerX42())return;na.origin=q;var oa=this,pa=this.findStory(na.attachment);setTimeout(function(){if(pa){var qa=oa.findAttachment(pa);if(qa)na.attachment=qa;}oa.$PubcontentFeedChainingControllerX45(na.attachment,na);},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ia.prototype.$PubcontentFeedChainingControllerX22=function(ma,na){if(!this.$PubcontentFeedChainingControllerX42())return;na.origin=ma.indexOf(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW)===-1?q:r;var oa=this,pa=this.findStory(na.attachment),qa=function ra(sa){if(pa){var ta=oa.findAttachment(pa);if(ta)sa.attachment=ta;}oa.$PubcontentFeedChainingControllerX45(sa.attachment,sa);};if(na.in_smooth_injection_experiment){qa(na);}else setTimeout(qa.bind(this,na),c('AttachmentRelatedShareConstants').EVENT_DELAY);};ia.prototype.$PubcontentFeedChainingControllerX23=function(ma,na){var oa=this,pa=this.findStory(na.attachment);setTimeout(function(){if(pa)var qa=oa.findContainer(pa);oa.$PubcontentFeedChainingControllerX46(pa,na.global_share_id,c('getOrCreateDOMID')(qa));},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ia.prototype.$PubcontentFeedChainingControllerX25=function(ma,na){var oa=this.findStory(na.attachment);if(oa){var pa=this.findAttachment(oa);if(pa)na.attachment=pa;}this.$PubcontentFeedChainingControllerX38(na.attachment,{origin:w,event_id:na.event_id});};ia.prototype.$PubcontentFeedChainingControllerX26=function(ma,na){na.origin=p;var oa=this.findStory(na.attachment);if(oa){var pa=this.findAttachment(oa);if(pa)na.attachment=pa;}this.$PubcontentFeedChainingControllerX47(na.attachment,na);};ia.prototype.$PubcontentFeedChainingControllerX27=function(ma,na){this.$PubcontentFeedChainingControllerX35(na.attachment,{story_id:na.story_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ia.prototype.$PubcontentFeedChainingControllerX28=function(ma,na){var oa=this.findStory(na.button);if(!oa)return;this.$PubcontentFeedChainingControllerX35(oa,{story_id:na.story_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ia.prototype.$PubcontentFeedChainingControllerX17=function(ma,na){var oa=this;setTimeout(function(){oa.$PubcontentFeedChainingControllerX48(na.markup.firstChild,{origin:x,content_id:na.content_id});},this.$PubcontentFeedChainingControllerX9.composer_publish_action);};ia.prototype.$PubcontentFeedChainingControllerX49=function(ma){return !!(ma&&ma.id&&!c('CSS').matchesSelector(ma,"._sf6")&&!(ma.id in this.$PubcontentFeedChainingControllerX10));};ia.prototype.$PubcontentFeedChainingControllerX50=function(ma){if(!ma)return false;if(ma.origin in this.$PubcontentFeedChainingControllerX1||ma.origin in this.$PubcontentFeedChainingControllerX2||ma.origin in this.$PubcontentFeedChainingControllerX4||ma.origin in this.$PubcontentFeedChainingControllerX3||ma.origin in this.$PubcontentFeedChainingControllerX7||ma.origin in this.$PubcontentFeedChainingControllerX8||ma.origin in this.$PubcontentFeedChainingControllerX9||ma.origin in this.$PubcontentFeedChainingControllerX5||ma.origin in this.$PubcontentFeedChainingControllerX6||ma.origin===p||ma.origin===r||ma.origin===y||ma.origin===z||ma.origin===aa)return true;return false;};ia.prototype.$PubcontentFeedChainingControllerX51=function(ma){this.$PubcontentFeedChainingControllerX10[ma]=true;};ia.prototype.$PubcontentFeedChainingControllerX41=function(ma){delete this.$PubcontentFeedChainingControllerX10[ma];};ia.prototype.$PubcontentFeedChainingControllerX31=function(ma){if(!ma)return false;var na="_3lkn",oa=ma.nextSibling,pa=true;if(oa&&oa.firstChild){var qa=oa.firstChild;pa=!(qa.hasChildNodes()&&c('CSS').hasClass(qa,na));}if(!pa)return false;var ra=ma.children[0],sa=ma.children[1],ta="_4_ck";if(ra&&c('CSS').hasClass(ra,ta)||sa&&c('CSS').hasClass(sa,ta))return false;return true;};ia.prototype.$PubcontentFeedChainingControllerX32=function(ma){if(!ma)return true;var na=c('DOM').scry(ma,"._1xwr");if(na.length)return true;return false;};ia.prototype.$PubcontentFeedChainingControllerX40=function(ma,na){var oa=this.findStory(ma);if(!this.$PubcontentFeedChainingControllerX49(oa))return null;if(!this.$PubcontentFeedChainingControllerX50(na))return null;this.$PubcontentFeedChainingControllerX51(oa.id);if(ja(oa)&&na.chaining_type!=='contextual_recommendations')return null;var pa;if(!na.continued_chaining){pa=this.findContainer(oa);if(!pa)return null;var qa=c('DOM').create('div'),ra=c('DOM').appendContent(pa,qa);if(ra.length!==1)return null;}else{pa=oa;qa=c('DOM').create('div');ra=c('DOM').insertAfter(pa,qa);c('DOM').remove(pa);if(ra.length!==1)return null;}if(na.is_auto_expand){return {chainingWrapper:ra[0],story:oa,is_auto_expand:na.is_auto_expand};}else return {chainingWrapper:ra[0],story:oa};};ia.prototype.$PubcontentFeedChainingControllerX29=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=this.findStreamRoot(oa.story);if(!pa)return false;var qa=pa.getAttribute('id'),ra=c('XFeedAdsChainingController').getURIBuilder().setString('actor_id',na.actor_id).setString('origin',na.origin).setString('ei',na.client_token).setString('data_ownerid',qa);if(na.ft_id)ra.setString('ft_id',na.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(ra.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX45=function(ma,na){var oa,pa=this;if(!this.$PubcontentFeedChainingControllerX31(this.findStory(ma)))return false;var qa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!qa)return false;c('CSS').addClass(qa.chainingWrapper,"_3lkn");var ra=null;if(na.fbvideo_id){ra=c('XPubcontentRelatedVideoChainingController').getURIBuilder();ra.setInt('fbvideo_id',na.fbvideo_id);}else{ra=c('XPubcontentRelatedShareChainingController').getURIBuilder();ra.setInt('global_share_id',na.global_share_id);}ra.setString('attachment_div_id',c('getOrCreateDOMID')(na.attachment));if(na.ft_id)ra.setString('ft_id',na.ft_id);if(na.link_url)ra.setString('link_url',na.link_url);if(na.video_div_id)ra.setString('video_div_id',na.video_div_id);if(na.share_id)ra.setString('share_id',na.share_id);var sa=JSON.parse(c('DataAttributeUtils').getDataFt(qa.story))||{};if('qid' in sa&&'mf_story_key' in sa){ra.setString('qid',sa.qid);ra.setString('mf_story_key',sa.mf_story_key);}if(na.is_auto_expand){this.$PubcontentFeedChainingControllerX41(qa.story.id);ra.setBool('is_auto_expand',na.is_auto_expand);}var ta=new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,qa.story.id)).setRelativeTo(qa.chainingWrapper).setAllowCrossPageTransition(true).setURI(ra.getURI());sa&&ta.setData(sa);if(na.in_smooth_injection_experiment)(function(){var ua=null,va=c('Event').listen(window,'scroll',function(){this.$PubcontentFeedChainingControllerX52=true;if(ua!==null)clearTimeout(ua);ua=setTimeout(function(){this.$PubcontentFeedChainingControllerX52=false;this.$PubcontentFeedChainingControllerX11&&this.$PubcontentFeedChainingControllerX11();this.$PubcontentFeedChainingControllerX11=null;}.bind(this),ba);}.bind(pa));c('CSS').hide(qa.chainingWrapper);ta.setHandler(function(wa){if(!this.$PubcontentFeedChainingControllerX52){this.$PubcontentFeedChainingControllerX53(ma,qa.chainingWrapper,va);}else this.$PubcontentFeedChainingControllerX11=this.$PubcontentFeedChainingControllerX53.bind(this,ma,qa.chainingWrapper,va);}.bind(pa));})();ta.send();return true;};ia.prototype.$PubcontentFeedChainingControllerX46=function(ma,na,oa){if(!this.$PubcontentFeedChainingControllerX49(ma))return null;this.$PubcontentFeedChainingControllerX51(ma.id);var pa=c('XRelatedGamesChainingController').getURIBuilder().setInt('app_id',na).setString('attachment_div_id',oa);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,ma.id)).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX30=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=this.findStory(ma),qa=c('XPubcontentFeedChainingController').getURIBuilder().setString('actor_id',na.actor_id).setString('origin',na.origin).setString('referrer',na.referrer).setString('trigger',na.trigger).setBool('is_home_request',this.$PubcontentFeedChainingControllerX42()).setBool('is_sponsored',ja(pa)).setEnum('reaction_type',na.reaction_type);if(na.ft_id)qa.setString('ft_id',na.ft_id);if(na.content_id)qa.setString('content_id',na.content_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(qa.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX38=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XEventRelatedEventsPivotController').getURIBuilder().setInt('event_id',na.event_id).setString('attachment_id',c('getOrCreateDOMID')(ma)).setString('trigger_action',na.origin).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX20=function(ma,na){return function(oa,pa){var qa={origin:y};if(pa.storyid){qa.story_id=pa.storyid;}else{var ra=this.findStory(pa.attachment);if(!ra)return ma;qa.ft_id=this.findFeedbackTargetId(ra);}return this.$PubcontentFeedChainingControllerX35(pa.attachment,qa,na,function(){return ma(oa,pa);});}.bind(this);};ia.prototype.$PubcontentFeedChainingControllerX35=function(ma,na,oa,pa){var qa=c('XLEDFollowUpFeedUnitController').getURIBuilder().setEnum('entry_point',oa);if(na.ft_id)qa=qa.setString('ft_id',na.ft_id);if(na.story_id)qa=qa.setString('story_id',na.story_id);var ra=this.$PubcontentFeedChainingControllerX40(ma,na);if(!ra){pa&&pa();return;}new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX41(ra.story.id);pa&&pa();}.bind(this)).setHandler(function(sa){if(!sa.payload.is_chained){this.$PubcontentFeedChainingControllerX41(ra.story.id);pa&&pa();}}.bind(this)).setRelativeTo(ra.chainingWrapper).setURI(qa.getURI()).setAllowCrossPageTransition(true).send();};ia.prototype.$PubcontentFeedChainingControllerX33=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XSpokespersonProductChainingController').getURIBuilder().setString('ft_id',na.ft_id).setEnum('reaction_type',na.reaction_type).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX47=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XPubcontentCommerceProductChainingController').getURIBuilder().setString('attachment_id',c('getOrCreateDOMID')(ma)).setInt('product_id',na.product_id).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX48=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XSearchRelatedPostsPivotController').getURIBuilder().setString('origin',na.origin).setString('content_id',String(na.content_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX39=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XPubcontentFeedCommentChainingController').getURIBuilder().setString('action_trigger',String(na.action_trigger));if(na.ft_id)pa.setString('ft_id',na.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa.getURI()).setAllowCrossPageTransition(true).send();return true;};ia.prototype.$PubcontentFeedChainingControllerX34=function(ma,na){var oa=this.$PubcontentFeedChainingControllerX40(ma,na);if(!oa)return false;var pa=c('XPubcontentGroupRelatedStoriesChainingController').getURIBuilder().setInt('post_id',na.post_id).setBool('is_home_request',this.$PubcontentFeedChainingControllerX42()).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX41.bind(this,oa.story.id)).setRelativeTo(oa.chainingWrapper).setURI(pa).setAllowCrossPageTransition(true).send();return true;};ia.prototype.findStory=function(ma){var na="^div._4-u2",oa=c('DOM').scry(ma,na);return oa.length===1?oa[0]:null;};ia.prototype.findFeedbackTargetId=function(ma){if(la(ma)){var na=c('DOMQuery').scry(ma,"input[name='ft_ent_identifier']"),oa=na.find(function(ra){return !ka(ra);});if(!oa)return null;return oa.value;}else if(ca){var pa=c('DOMQuery').scry(ma,"input[name='ft_ent_identifier']")[0];if(!pa)return null;return pa.value;}else{var qa=c('DOMQuery').find(ma,"input[name='ft_ent_identifier']");if(!qa)return null;return qa.value;}};ia.prototype.findAttachment=function(ma){var na="div._6m2",oa="div.iframeEmbed",pa=c('DOM').scry(ma,na)[0]||c('DOM').scry(ma,oa)[0];return pa;};ia.prototype.findContainer=function(ma){var na=c('DOM').create('div'),oa=c('DOM').insertAfter(ma,na);c('ContextualThing').register(na,ma);return oa.length>=1?oa[0]:null;};ia.prototype.findStreamRoot=function(ma){var na="^div._4ikz";return c('DOM').scry(ma,na)[0];};ia.prototype.findAdClientToken=function(ma){var na=this.findStory(ma);if(!na)return null;var oa=c('DataAttributeUtils').getDataFt(na);if(!oa)return null;var pa=JSON.parse(oa);return pa[ia.getAdClientTokenIndex()];};ia.prototype.shouldPuntGroupChaining=function(ma){var na="^._4ruh";return c('DOM').scry(ma,na).length>=1;};ia.prototype.$PubcontentFeedChainingControllerX42=function(){var ma=c('URI').getRequestURI(false);return ma.getPath()==='/'||ma.getPath()==='/home.php';};ia.prototype.$PubcontentFeedChainingControllerX53=function(ma,na,oa){var pa=c('PubcontentFeedChainingInjectionUtils').isEligibleToInject(ma);if(pa){c('CSS').show(na);}else c('DOM').empty(na);oa.remove();};function ja(ma){if(ga&&ha){return c('DOM').scry(ma,ga).length>0&&c('DOM').scry(ma,ha).length===0;}else return c('DOM').scry(ma,"._5paw").length>0&&c('DOM').scry(ma,"._14zs").length===0;}function ka(ma){return !!ma&&(c('CSS').matchesSelector(ma,da)||!!c('Parent').bySelector(ma,da));}function la(ma){return !!ma&&c('DOM').scry(ma,da).length>0;}f.exports=ia;}),null);